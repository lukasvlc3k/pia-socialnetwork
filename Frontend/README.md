# PIA Social Network - Client

Client is based on React and Next.js framework.

## Decomposition
The client is divided into a several directories
- api (generated API client)
- components (UI components)
- consts (constants)
- contexts (React contexts for storing data)
- pages (pages for routing, NEXT.js is responsible for routing, recommended NEXT.js dir structure is followed)
- public (files located at / endpoint - e.g. favicon)
- styles (css/scss files)
- types (types not generated by OpenAPI Client generator)
- utils

## WebSockets
SocketContext is responsible for storing all important data to communicate with server via websockets.
There is an eventbus (emittery lib is used), that triggers an event when a message (general message, not chat message) is
received via WebSocket communication. It also publishes access to socket, so it is easy to send a message from components.

WebSockets is reconnecting when the connection is lost. First message that is always sent is authentication (via JWT).

## Posts
10 last posts are loaded on start. Every 5 seconds (the interval should be increased for use in a production environment
to mitigate traffic and server load) a request for newer posts to a server is sent. If there are any, they are
added to the beginning (keeping the order). 

When user scrolls to the bottom of the page (specifically to the 3/4 of the page for more smooth user experience), 3 older
posts are loaded (when there are some). 
